@use 'sass:color';
@use "functions/color" as *;

@mixin light-text {
  font-weight: 200;
  font-size: smaller;
  color: color.adjust($text-color, $lightness: 15%);
}

@mixin post-description {
  .post-description {
    @include light-text;
    width: 90%;
    margin-bottom: 1.4rem;
    font-style: italic;

    @media (max-width: 36em) {
      width: unset;
    }
  }
}

$marker-color: #ff073a;

$down-image-marker:"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='#{encodecolor($marker-color)}' d='M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z'/%3E%3C/svg%3E";

.section-post.blog .main .content .post-body {
  ul {
    padding-inline-start: 1.4em;

    li:before {
      padding-right: .4em;
      margin-left: -1.4em;
      line-height: 1;
    }
  }
}

.content-container {
  &.blog {
    .section-head.paginator {
      &:hover .paginator-stats {
        opacity: .5;
      }

      .paginator-stats {
        opacity: 0;
        transition: 500ms;
        text-align: end;
        margin-top: -1em;
        transform: translateY(-1.5em);
        font-weight: 100;
        font-style: italic;
      }
    }

    figure img {
      width:100%;
      height:100%;
      object-fit: contain;
    }

    .post-preview {
      img {
        border-radius: .6rem;
        /* box-shadow: 4px 4px 4px lightgray; */
      }
    }

    @include post-description();

    .preview-black {
      box-shadow: 0px 0px 15px 10px #000000;
      filter: blur(0px);
      transition: all 1s linear;

      &:hover {
        transition: all 3s linear;
        filter: blur(5px);
      }
    }

    .posts {
      .year-heading {
        margin-block-start: unset;
        margin-block-end: unset;
        font-size: 4em;
        font-weight: 200;
        font-style: italic;
        opacity: .75;
        max-width: fit-content;

        @media (min-width: 75em) {
          margin: 0 -1em;
        }

        &:hover + .year-count {
          opacity: .5;
        }
      }

      .year-count {
        max-width: fit-content;
        opacity: 0;
        transition: 500ms;
        text-align: end;
        transform: translateX(200%);
        font-weight: 100;
        font-style: italic;
      }

      .post {
        &.even {
          .post-description {
            margin-left: 1rem;
          }
        }

        &.odd {
          .post-description {
            margin-right: 1rem;
            align-self: flex-end;
          }
        }
      }
    }
  }
}

.section-post {
  .content-container.single {
    .post-body {
      img {
        max-width: 100%;
      }

      .iiif.iiif-image {
        margin-top: unset;
        margin-bottom: 3em;
        border-radius: unset;
      }

      figure {

        &.center {
          display: flex;
          justify-content: center;
        }

        img {
          border-radius: .6rem;
          /* box-shadow: 3px 3px 3px lightgray; */
        }

        figcaption {
          text-align: end;
          font-style: italic;
        }

      }

      .katex-html {
        display: none;
      }

      .even-table {
        width: 100%;
        td {
          padding: 0 .2em;
        }
      }

      .download-icon {
        font-weight: bold;

        &:before {
          content: '';
        }

        &:after {
          content: url($down-image-marker);
          margin-left: .6rem;
          vertical-align: middle;
          height: 1.4em;
          width: 1.4em;
          display: inline-block;
        }
      }

      .christmas-card {
        width: 70%;
        margin: 1rem auto 2rem auto;

        img {
          border: 1px solid;
          border-radius: unset;
        }

        @media (max-width : 36em) {
          width: 100%;
        }
      }

      ul li figure {
          display: inline-block;
          margin-block-start: 0;
          margin-block-end: 0;
          margin-inline-start: 0;
          margin-inline-end: 0;

          img {
              vertical-align: middle;
              margin-right: 1em;
          }
      }

      .img-center {
        img {
          display: block;
          margin: 0 auto 1em;
        }

      }

      details {
        margin-bottom: 1em;
      }

      .reference {
        margin-left: 1.4rem;
        font-style: italic;
        font-weight: 500;


        .worldcat {
          &:before {
            content: '';
          }

          &:after {
            display: inline-block;
            width: 1em;
            content: url($link-light);

          }

          &:hover {
            text-decoration: unset;
          }


        }
      }

      p:has(.iiif-link) {
        text-align: end;

        .iiif-link {
          @include light-text;
          font-size: smaller;

          &:before {
            background-image: url(/images/iiif-logo.svg);
            background-repeat: no-repeat;
            background-size: contain;
            content: "IIIF";
            color: transparent;
            vertical-align: middle;
            margin-right: .8rem;
          }

        }
      }

      .highlight {

        pre {

          border-radius: 1rem;
          background-color: $box-background;
          box-shadow: 0 0px 2px $box-border;
        }
      }

      .cta {
        font-size: larger;
        font-weight: bold;
      }

    }
  }

  .post .post-body {
    .citation {
      margin-left: 5rem;

      @media (max-width : 36em) {
        margin-left: 2.4rem;
      }
    }
  }
}

.subsection-list-container {
  .subsection-list-heading {

  }

  .subsection-list {
    li {
      a {

      }
    }
  }
}

._hidden-notes {
  display: none;

  * {
    display: none;
  }
}

.years {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;

  .years-heading {
    flex-grow: 1;
    text-align: center;
  }

  .year {
    font-size: 1.6em;
  }

}

.blog .main .post .content {
  .post-description {
    /*text-align: center;*/
    font-weight: 300;
    margin-top: -1rem;
    font-style: italic;
  }
}
