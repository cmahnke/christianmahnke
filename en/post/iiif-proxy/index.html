<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>IIIF Proxy · Christian Mahnke</title>
    <meta name="author" content="Christian Mahnke">
  <meta name="dc.creator" content="Christian Mahnke">
  <link rel="me" href="https://orcid.org/0009-0003-1361-4159">


<meta http-equiv="Content-Language" content="en">
<meta name="dc.type" content="Text">
<meta name="description" content="On-the-fly image processing for IIIF resources">
<meta property="og:type" content="article" /><meta property="og:url" content="https://christianmahnke.de/en/post/iiif-proxy/" />
  <meta property="og:title" content="IIIF Proxy · Christian Mahnke" />
<meta property="og:image" content="https://christianmahnke.de/en/post/iiif-proxy/ogPreview.en_hu_df5cea799fa5975c.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />



<meta name="keywords" content="Fold removal, proxy server, image processing, IIIF, OpenCV, Digital images"><meta name="dc.subject" content="Fold removal"><meta name="dc.subject" content="proxy server"><meta name="dc.subject" content="image processing"><meta name="dc.subject" content="IIIF"><meta name="dc.subject" content="OpenCV"><meta name="dc.subject" content="Digital images">
<meta name="generator" content="Hugo 0.156.0">
<meta name="projektemacher.org:build-date" content="2026-02-22 12:09:36.869379149 &#43;0000 UTC m=&#43;390.491887641"><meta name="projektemacher.org:git-commit" content="6cd1f53">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">

<link rel="icon" type="image/svg+xml" href="https://christianmahnke.de/images/cm.svg">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

    <meta name="theme-color" content="#701611"><link href="https://christianmahnke.de/css/47ab77ae893ed8ba730219016f312670.min.57d401165ae34e4f8b4c544875a950c509306a12c5696d1167ac1706a3cfef44.css" rel="stylesheet" integrity="sha256-V9QBFlrjTk&#43;LTFRIdalQxQkwahLFaW0RZ6wXBqPP70Q=">
<script src="https://christianmahnke.de/js/5d85c20c8f862f9ecfa0aee0edbc8fe4.min.11d8f9f7fd6e5b69d7aea15c1168e83bfc85ea5e785b7d9a068e7479ca14edaf.js" integrity="sha256-Edj59/1uW2nXrqFcEWjoO/yF6l54W32aBo50ecoU7a8="></script>
<script src="https://christianmahnke.de/js/721c4fdccbf9e7c9a389daf09b558bfc.min.59250deb5ddac5846d3f7e42dc2a850d3e926d811915974ac82d6e035defcad5.js" integrity="sha256-WSUN613axYRtP35C3CqFDT6SbYEZFZdKyC1uA13vytU="></script><link rel="icon" type="image/png" href="https://christianmahnke.de/images/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://christianmahnke.de/images/favicon-16.png" sizes="16x16">
    

    <link rel="shortcut icon" href="https://christianmahnke.de/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://christianmahnke.de/images/favicon.ico" type="image/x-icon">

    <link rel="alternate" type="text/bibtex" href="https://christianmahnke.de/en/post/iiif-proxy/citation.bib" title="Christian Mahnke" />
    <link rel="canonical" href="https://christianmahnke.de/en/post/iiif-proxy/"><script type="application/ld+json">{"@context":"http://schema.org","@id":"https://christianmahnke.de/en/post/iiif-proxy/","@type":"BlogPosting","about":["Fold removal","proxy server","image processing","IIIF","OpenCV","DigitalImages",{"@id":"http://www.wikidata.org/entity/Q152838","@type":"Thing","name":"University of Göttingen"},{"@id":"http://www.wikidata.org/entity/Q504453","@type":"Thing","name":"Apache Groovy"},{"@id":"http://www.wikidata.org/entity/Q564783","@type":"Thing","name":"Göttingen State and University Library"},{"@id":"http://www.wikidata.org/entity/Q628106","@type":"Thing","name":"Göttinger Digitalisierungszentrum"}],"author":{"@id":"https://christianmahnke.de/#person","@type":"Person","name":"Christian Mahnke","url":"https://christianmahnke.de/"},"datePublished":"2022-01-26T11:44:44+02:00","description":"On-the-fly image processing for IIIF resources","headline":"IIIF Proxy","isPartOf":{"@id":"https://christianmahnke.de/post","@type":"Blog","name":"Christian Mahnke Blog"},"keywords":["Fold removal","proxy server","image processing","IIIF","OpenCV","DigitalImages"],"name":"IIIF Proxy","url":"https://christianmahnke.de/en/post/iiif-proxy/"}
</script>
</head><body class="section-post dir-postiiif-proxy blog  ">
      <a name="top"></a>
      <div class="page-wrapper">
        <div class="main">
          <header class="header header-main" id="head" data-sticky-class="sticky-top">
    <div class="wrapper">
        <label class="menu-open" for="menu-toggle">
            <i class="menu-open-icon"></i>
        </label>
        <div class="menu">
            <nav class="top top-menu">
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="menu-icon"></i></label>
    <ul class="navigation-list"><li class="navigation-item navto-"><a class="navigation-link" href="https://christianmahnke.de/en/" title="Focuses">Focuses<i class="link-icon"></i></a></li><li class="navigation-item navto-collections"><a class="navigation-link" href="https://christianmahnke.de/en/collections" title="Collections">Collections<i class="link-icon"></i></a></li><li class="navigation-item current navto-post"><a class="navigation-link" href="https://christianmahnke.de/en/post" title="Blog">Blog<i class="link-icon"></i></a></li><li class="navigation-item navto-links"><a class="navigation-link" href="https://christianmahnke.de/en/links" title="Links">Links<i class="link-icon"></i></a></li><li class="navigation-item navto-about"><a class="navigation-link" href="https://christianmahnke.de/en/about" title="About">About<i class="link-icon"></i></a></li><li class="navigation-item navto-search"><form action="https://christianmahnke.de/en/search/" method="get" class="search-form" id="menu-search-form"><input name="q" type="text" placeholder="Search" class="search-input" id="menu-search-input"><button type="submit" class="search-button" id="menu-search-button"><i class="search-icon"></i></button></form></li><li class="navigation-item lang">
              <a href="https://christianmahnke.de/post/iiif-proxy/" title="Deutsch">Deutsch</a>
            </li></ul>
  </nav>
        </div>
        <div class="home-link">
            <a href="https://christianmahnke.de/"><h1 class="header-title">Christian Mahnke</h1></a>
        </div></div>
    <div class="header-spacer"></div>
    <a href="#top">
        <div class="backToTop"></div>
    </a>
</header>
<div class="content-container single">
    <div class="post ">
  <div class="content">
      <h1 class="post-title">IIIF Proxy</h1><div class="post-description">On-the-fly image processing for IIIF resources</div><div class="date">
          <time class="post-data" datetime="2022-01-26T11:44:44&#43;02:00">Wednesday, January 26, 2022</time>
        </div><div class="post-body"><p>To improve the &lsquo;displayability&rsquo; of digital objects such as coins and books, I have written a proxy for IIIF resources&hellip;</p>
<p>The digital collections of the University of Göttingen are mainly fed from two portals:</p>
<ul>
<li><a href="https://sammlungen.uni-goettingen.de/index/" target="_blank">Scientific Collections of the Georg-August-Universität Göttingen</a></li>
<li><a href="https://gdz.sub.uni-goettingen.de/" target="_blank">Göttingen Digitisation Centre</a></li>
</ul>
<p>Both make their digitised material available via <a data-wikidata-entity="Q22682088" href="https://iiif.io/" target="_blank">IIIF</a>. Unfortunately, the images provided are not optimised for aesthetically pleasing secondary use.</p>
<p>In order to minimise manual post-processing and the resulting storage effort, I have slightly extended an existing IIIF server - <a href="https://github.com/dbmdz/iiif-server-hymir/" target="_blank">Hymir from MDZ</a> - so that it is able to sit on an institutional server and process the images delivered by it.</p>
<p>In order to keep the image processing configurable, a field of the IIIF Image API is used to specify the operation. The <a href="https://iiif.io/api/image/2.1/#quality" target="_blank"><code>quality</code></a> field was suitable for this, the proxy allows:</p>
<ul>
<li><code>nofold</code> - remove page fold</li>
<li><code>transparent-background</code> - Transparent background</li>
<li><code>nofold+transparentbg</code> - both together</li>
</ul>
<p>For the image operations themselves, <a data-wikidata-entity="Q165277" href="https://opencv.org/" target="_blank">OpenCV</a> is used, whereby the background is simply removed with a threshold value and only at the edges - i.e. made transparent. Recognising the folds is a little more complicated, but it&rsquo;s not rocket surgery either:</p>
<ul>
<li>Recognising lines (
      
        
      <a data-wikidata-entity="Q195076" href="https://en.wikipedia.org/wiki/Hough_transform" target="_blank">Probabilistic Hough Line Transform</a>) in the fold area depending on whether they are left or right-sided</li>
<li>Sorting the recognised lines by angle and length to identify the most likely candidate of the fold</li>
<li>Rotate to align the detected fold vertically</li>
</ul>
<p>But here the reliability could be improved.</p>
<h1 id="examples">Examples</h1>
<p>The following examples show digital copies in the respective portal and in the viewer of the proxy. The viewer of the proxy allows the background colour to be changed in order to increase the contrast. A blue background is preset in the examples.</p>
<h2 id="transparent-background">Transparent background</h2>
<div id="_gallery-837dd30136b2777542aa36cbe78aefc7" class="gallery "><a class="gallery-image caption" href="img/Sammlungsportal-record_DE-MUS-062622_kenom_127703.png" data-pswp-width="2980" data-pswp-height="1664" target="_blank"><img src="https://christianmahnke.de/en/post/iiif-proxy/img/Sammlungsportal-record_DE-MUS-062622_kenom_127703_hu_2182b8f300978370.webp" alt="Before" class="gallery-preview" /><div class="hidden-caption-content">Before</div></a><a class="gallery-image caption" href="img/Proxy-record_DE-MUS-062622_kenom_127703.png" data-pswp-width="2980" data-pswp-height="1664" target="_blank"><img src="https://christianmahnke.de/en/post/iiif-proxy/img/Proxy-record_DE-MUS-062622_kenom_127703_hu_3143deeb990974e.webp" alt="After" class="gallery-preview" /><div class="hidden-caption-content">After</div></a></div>

<script type="text/javascript">
  window.photoswipe("#_gallery-837dd30136b2777542aa36cbe78aefc7", "a.gallery-image")
</script>
<p><a href="https://sammlungen.uni-goettingen.de/objekt/record_DE-MUS-062622_kenom_127703/" target="_blank">Original presentation</a></p>
<div class="small-font-right">
Picture: Coin Cabinet of the University of Göttingen, Stephan Eckardt, Archaeological Institute Göttingen, 2014 / Licence: Namensnennung - Nicht kommerziell 4.0 (CC BY-NC 4.0)
</div>
<h2 id="without-page-fold">Without page fold</h2>
<p>And with transparent background&hellip;</p>
<div id="_gallery-82adbc0eed29818965fbef0a31c9bbfe" class="gallery "><a class="gallery-image caption" href="img/GDZ-DE-611-HS-3461927_00000016.png" data-pswp-width="2980" data-pswp-height="1664" target="_blank"><img src="https://christianmahnke.de/en/post/iiif-proxy/img/GDZ-DE-611-HS-3461927_00000016_hu_ed99fc880f137b55.webp" alt="Before" class="gallery-preview" /><div class="hidden-caption-content">Before</div></a><a class="gallery-image caption" href="img/Proxy-DE-611-HS-3461927_00000016.png" data-pswp-width="2980" data-pswp-height="1664" target="_blank"><img src="https://christianmahnke.de/en/post/iiif-proxy/img/Proxy-DE-611-HS-3461927_00000016_hu_1d64cb70ecdeb750.webp" alt="After" class="gallery-preview" /><div class="hidden-caption-content">After</div></a></div>

<script type="text/javascript">
  window.photoswipe("#_gallery-82adbc0eed29818965fbef0a31c9bbfe", "a.gallery-image")
</script>
<p><a href="https://gdz.sub.uni-goettingen.de/id/DE-611-HS-3461927?tify=%7B%22pages%22%3A%5B16%5D%2C%22view%22%3A%22info%22%7D" target="_blank">Original presentation</a></p>
<div class="small-font-right">
Picture: Niedersächsische Staats- und Universitätsbibliothek Göttingen / Licence: Public Domain Mark 1.0 (PDM)
</div>
<br>
<p>The project is available on <a href="https://github.com/cmahnke/iiif-proxy" target="_blank">GitHub</a>.</p>
<h1 id="update-11422">Update 11.4.22</h1>
<p>Due to time constraints, the project will not be continued for the time being, especially as the upstream project is not very active at the moment&hellip;</p></div>
  </div><div class="post-footer"><ul class="wikidata-summary">
    <div class="wikidata-title">Entites in this post (Wikidata)</div><li class="wikidata-entry"><a href="http://www.wikidata.org/entity/Q152838" title="University of Göttingen" rel="related">Wikidata entry: University of Göttingen</a>
      </li><li class="wikidata-entry"><a href="http://www.wikidata.org/entity/Q504453" title="Apache Groovy" rel="related">Wikidata entry: Apache Groovy</a>
      </li><li class="wikidata-entry"><a href="http://www.wikidata.org/entity/Q564783" title="Göttingen State and University Library" rel="related">Wikidata entry: Göttingen State and University Library</a>
      </li><li class="wikidata-entry"><a href="http://www.wikidata.org/entity/Q628106" title="Göttinger Digitalisierungszentrum" rel="related">Wikidata entry: Göttinger Digitalisierungszentrum</a>
      </li></ul><div class="spacer">
      </div>
      <div class="meta"><div class="cite-container"><details class="cite">
  <summary class="cite_summary">
    Cite this article
  </summary><div class="cite-body">
    <div class="cite-proposal">
      <span class="cite-author">Mahnke, Christian</span> <span class="cite-year">(2022)</span>: <span class="cite-title">IIIF Proxy</span>. In:  <a class="cite-source-link" href="https://christianmahnke.de/">ChristianMahnke.de</a> [Weblog], Jan 26, 2022. Online publication: <a class="cite-link" href="https://christianmahnke.de/post/iiif-proxy/">https://christianmahnke.de/post/iiif-proxy/</a>.
    </div>
    <a class="bibtex-download" href="https://christianmahnke.de/en/post/iiif-proxy/citation.bib" title="Download as BibTex">Download as BibTex</a>
  </div>
</details>
</div><div class="tags-heading">Tags</div>
        <div class="tags"><a href="https://christianmahnke.de/en/tags/IIIF" title="IIIF">#IIIF</a><a href="https://christianmahnke.de/en/tags/OpenCV" title="OpenCV">#OpenCV</a><a href="https://christianmahnke.de/en/tags/DigitalImages" title="Digital images">#Digital images</a></div>
      </div>
    </div></div><div class="related-posts">
    
      <div class="related-header">Related posts:</div>
      <ul>
        
          <li><a href="https://christianmahnke.de/en/post/vintagereality-apple-spatial/">Historical stereograms on modern hardware</a></li>
        
          <li><a href="https://christianmahnke.de/en/post/vintagereality-ai/">AI segmentation for stereoscopic cards</a></li>
        
          <li><a href="https://christianmahnke.de/en/post/hdr-iiif-vips/">HDR IIIF for everyone with VIPS</a></li>
        
          <li><a href="https://christianmahnke.de/en/post/fliiifenleger/">Fliiifenleger - an IIIF experimental platform</a></li>
        
          <li><a href="https://christianmahnke.de/en/post/wallpaper-generator/">Wallpaper virtual rooms!</a></li>
        
      </ul>
    
  </div>
  </div>

        </div><footer class="footer" role="contentinfo">
    <div class="spacer"></div>
    <div class="content">
        <div class="wrapper">
            <div class="menu-wrapper">
                <div class="footer-nav">
                    <h3 class="footer-nav">Navigation</h3>
                    <nav class="top top-menu">
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="menu-icon"></i></label>
    <ul class="navigation-list"><li class="navigation-item navto-"><a class="navigation-link" href="https://christianmahnke.de/en/" title="Focuses">Focuses<i class="link-icon"></i></a></li><li class="navigation-item navto-collections"><a class="navigation-link" href="https://christianmahnke.de/en/collections" title="Collections">Collections<i class="link-icon"></i></a></li><li class="navigation-item current navto-post"><a class="navigation-link" href="https://christianmahnke.de/en/post" title="Blog">Blog<i class="link-icon"></i></a></li><li class="navigation-item navto-links"><a class="navigation-link" href="https://christianmahnke.de/en/links" title="Links">Links<i class="link-icon"></i></a></li><li class="navigation-item navto-about"><a class="navigation-link" href="https://christianmahnke.de/en/about" title="About">About<i class="link-icon"></i></a></li><li class="navigation-item navto-search"><form action="https://christianmahnke.de/en/search/" method="get" class="search-form" id="menu-search-form"><input name="q" type="text" placeholder="Search" class="search-input" id="menu-search-input"><button type="submit" class="search-button" id="menu-search-button"><i class="search-icon"></i></button></form></li><li class="navigation-item lang">
              <a href="https://christianmahnke.de/post/iiif-proxy/" title="Deutsch">Deutsch</a>
            </li></ul>
  </nav>
                </div>
            </div>
            <div class="link-wrapper">
                <h3 class="footer-links">Links</h3>
                <ul class="footer-links"><li class="footer-link"><a href="https://github.com/cmahnke" target="_blank" title="GitHub"><div class="link-image github"></div>GitHub</a></li><li class="footer-link"><a href="https://projektemacher.org/" target="_blank" title="Projektemacher"><img class="link-image projektemacher" alt="Projektemacher Logo" src="https://christianmahnke.de/images/laborant.svg">Projektemacher</a></li><li class="footer-link"><a href="https://orcid.org/0009-0003-1361-4159" target="_blank" title="ORCID"><div class="link-image orcid"></div>0009-0003-1361-4159</a></li><li class="footer-link"><a href="https://www.linkedin.com/in/cmahnke" target="_blank" title="LinkedIn"><div class="link-image linkedin"></div>LinkedIn</a></li><li class="footer-link"><a href="https://www.librarything.com/profile/cmahnke" target="_blank" title="LibraryThing"><div class="link-image librarything"></div>LibraryThing</a></li><li class="footer-link"><a href="https://openbiblio.social/@cmahnke" rel="me" target="_blank" title="Mastodon"><div class="link-image mastodon"></div>@cmahnke@openbiblio.social</a></li><li class="footer-link"><a href="https://www.instagram.com/projektemacher/" target="_blank" title="Instagram" style="display: none;"><div class="link-image instagram"></div>Instagram</a></li><li class="footer-link"><a href="http://www.wikidata.org/entity/Q137668638" target="_blank" title="Wikidata" style="display: none;"><div class="link-image wikidata"></div>Wikidata</a></li><li class="footer-link"><a href="https://huggingface.co/cmahnke" target="_blank" title="Hugging Face"><div class="link-image hf"></div>Hugging Face</a></li><li class="footer-link"><a href="https://term.museum-digital.de/md-de/persinst/322830" target="_blank" title="museum:digital" style="display: none;"><div class="link-image md-term"></div>museum:digital</a></li></ul>
            </div>
            <div class="footer-placeholder"></div>
            <div class="contact-wrapper">
                <h3 class="footer-contact">Contact</h3><div class="footer-contact"><h4 class="contact-link">Mail</h4><a href="mailto:mail@christianmahnke.de" title="Send eMail">mail@christianmahnke.de</a></div><h3 class="footer-privacy"><a href="https://christianmahnke.de/privacy" title="Privacy policy">Privacy policy</a></h3>
                <h1 class=footer-title><img class="footer-icon" alt="Projektemacher.org" src="https://christianmahnke.de/images/cm-black.svg">Christian Mahnke</h1>
            </div>
        </div>
    </div>
    <div class="copyright"><a href="https://christianmahnke.de">&copy; MMXX - MMXXVI Christian Mahnke</a>
        <span class="icons-right"><a href="https://projektemacher.org"><img class="icon" alt="Projektemacher.org" src="https://christianmahnke.de/images/cm.svg"></a></span>
    </div>

</footer>


<script type="text/javascript">
    document.querySelector(".type-text")&&!document.querySelector(".subsection")?enterView({selector:".type-text",enter:function(e){e.classList.add("show")},offset:.25,once:!0}):document.querySelector(".type-text")&&document.querySelectorAll(".type-text").forEach(e=>e.classList.add("show","instant")),document.querySelector(".iframe-wrapper")&&enterView({selector:".iframe-wrapper",enter:function(e){e.classList.add("show")},offset:.45,once:!0}),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".backToTop").removeAttribute("href"),document.addEventListener("scroll",function(){window.scrollY>window.innerHeight?document.querySelector("#head").classList.add("show-top-button"):document.querySelector("#head").classList.remove("show-top-button")})})
</script>
</div>
    </body>
 </html>
