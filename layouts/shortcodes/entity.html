{{- $href := "" -}}
{{- $title := "" -}}
{{- $class := "" -}}
{{- $id := "" -}}
{{- with .Get "link" -}}
    {{- $href = . -}}
{{- end -}}
{{- with .Get "title" -}}
    {{- $title = . -}}
{{- end -}}
{{- with .Get "class" -}}
    {{- $class = . -}}
{{- end -}}
{{- with .Get "id" -}}
    {{- $id = . -}}
{{- end -}}
{{- if eq $id "" -}}
  {{- errorf "[shortcodes/entity.html] Entity ID missing for %s" $href -}}
{{- end -}}
{{/*
{{- $class = printf "%s %s" $class $id -}}
*/}}
{{- $external := false -}}
{{- if and (or (hasPrefix $href "http") (hasPrefix $href "//")) (not (hasPrefix $href .Site.BaseURL)) -}}
  {{- $class = printf "%s %s" $class "external" -}}
  {{- $external = true -}}
{{- end -}}
<a data-wikidata="{{ $id }}" {{ if ne $href "" }}href="{{ $href }}"{{ end }} {{ if ne $class "" }}class="{{ $class }}"{{ end }} {{ if ne $title "" }}title="{{ $title }}"{{ end }} {{ if $external }}target="_blank"{{ end }} >{{.Inner | safeHTML}}</a>
